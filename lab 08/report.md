---
# Front matter
lang: ru-RU
title: "Отчет по лабораторной работе 8"
subtitle: " Командная оболочка Midnight Commander"
author: "Шалыгин Георгий Эдуардович, НФИбд-02-20"

# Formatting
toc-title: "Содержание"
toc: true # Table of contents
toc_depth: 2
lof-title: "Список изображений"
lof: true # Список изображений
fontsize: 12pt
linestretch: 1.5
papersize: a4paper
documentclass: scrreprt
polyglossia-lang: russian
polyglossia-otherlangs: english
mainfont: Cambria
romanfont: Cambria
sansfont: Cambria
monofont: Cambria
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase
indent: true
pdf-engine: lualatex
header-includes:
  - \linepenalty=10 # the penalty added to the badness of each line within a paragraph (no associated penalty node) Increasing the value makes tex try to have fewer lines in the paragraph.
  - \interlinepenalty=0 # value of the penalty (node) added after each line of a paragraph.
  - \hyphenpenalty=50 # the penalty for line breaking at an automatically inserted hyphen
  - \exhyphenpenalty=50 # the penalty for line breaking at an explicit hyphen
  - \binoppenalty=700 # the penalty for breaking a line at a binary operator
  - \relpenalty=500 # the penalty for breaking a line at a relation
  - \clubpenalty=150 # extra penalty for breaking after first line of a paragraph
  - \widowpenalty=150 # extra penalty for breaking before last line of a paragraph
  - \displaywidowpenalty=50 # extra penalty for breaking before last line before a display math
  - \brokenpenalty=100 # extra penalty for page breaking after a hyphenated line
  - \predisplaypenalty=10000 # penalty for breaking before a display
  - \postdisplaypenalty=0 # penalty for breaking after a display
  - \floatingpenalty = 20000 # penalty for splitting an insertion (can only be split footnote in standard LaTeX)
  - \raggedbottom # or \flushbottom
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Освоение основных возможностей командной оболочки Midnight Commander. Приобретение навыков практической работы по просмотру каталогов и файлов; манипуляций с ними

Объект исследования: Midnight Commander.

Предмет исследования:  работа в Midnight Commander.

# Техническое обеспечение:

- Характеристики техники: AMD Ryzen 5 3500U 2.1 GHz, 8 GB оперативной памяти, 50 GB свободного места на жёстком диске;
- ОС Windows 10 Home
- Git  2.31.1
- Google Chrome 91.0.4472.19
- VirtualBox 2.0
- CentOS 7

# Условные обозначения и термины:

**Командная оболочка** — интерфейс взаимодействия пользователя с операционной системой и программным обеспечением посредством команд.

**Midnight Commander** (или mc) — псевдографическая командная оболочка для UNIX/Linux систем. Для запуска mc необходимо в командной строке набрать mc и нажать Enter.

Подробнее в [2] и [3].

# Теоретическое введение:

## **Общее**

Ctrl+x,j — Показ фоновых задач

Сtrl-X+A — текущие VFS (ftp и пр.)

ESC+цифра — тоже что и F{цифра} (ESC+5 = F5)

## **F1-F12**

F1 — Помощь

F2 — Сохранить изменения в файл при редактировании

F3 — Просмотр файла

F3 — (Во время редактирования) Начать выделение текста. Повторное нажатие F3 закончит выделение

F4 — Редактирование файла

F5 — Скопировать выделенное

F6 — Переместить выделенное

F8 — Удалить выделенное  

Shift+F1 — вызывается меню быстрого перехода между точками монтирования на левой панели

Shift+F2 — вызывается меню быстрого перехода между точками монтирования на правой панели

Shift+F5 — скопировать файл в этот же каталог

Shift+F6 — переместить/переименовать файл в этот же каталог

## **Поиск**

ctrl-s — Быстрый поиск файла или каталога

alt-shift-? — Вызывается меню расширенного поиска файлов

## **Командная строка**

ctrl-a — курсор в начало

ctrl-e — курсор в конец

esc-! — выполнить команду с параметрами

ctrl-x, p или alt+a — вставить имя каталога

esc, enter; ctrl-enter — послать текущий объект в командную строку

ctrl-x,t — Вставка всех выделенных объектов в командную строку

esc, tab — дополнение команды

alt-a — вставить текущий каталог в командную строку

Alt-TAB (ESC+TAB) — Крутейшая комбинация для поиска загружаемых файлов (например, вы забыли как правильно пишется: netcfg или netconfig. Достаточно набрать в командной строке net и нажать Alt-TAB — вам сразу покажут что можно запустить, которое начинается со слова net) нажимать два раза!
alt-shift-! — вывод результата команды
ctrl-shift-v — вставка из буфера обмена

## **Операции над файлами**

Shift+F4 — Создает новый файл

shift-f6 — переименовать файл

Ctrl+x,i — Быстрый просмотр информации о текущем объекте на второй панели

Ctrl+x,q — Быстрый просмотр содержимого файла на второй панели

alt-. — показать скрытые файлы

ctrl-x, c — права на файл

ctrl-x, o — владелец файла

Shift-F3 — просмотр файла (raw/ без учета расширения)

Ctrl-X+L — создать ссылку на файл

Ctrl-X+S — создать символическую ссылку на файл

Ctrl + x v — создать относительную символическую ссылку  

trl+x,Ctrl+s — Редактировать символическую ссылку

F12 — Save as

ctrl-t — отметить файл либо снять отметку

\+ — выбрать (отметить) группу файлов по регулярному выражению

\ — снять отметку с группы файлов

ctrl-x, ctrl-d — сравнить файлы

ctrl-t или Insert — Выделение текущего объекта

## **Работа с каталогами**

alt-o — открыть каталог под курсором в соседней панели

alt-i — открыть текущий каталог в соседней панели

сtrl-\ — показать «Справочник каталогов»

ctrl-x, h — добавить ссылку на текущий каталог в меню быстрого доступа

alt-shift-h — Отобразить историю каталогов

Ctrl+l — Перерисовать экран

Ctrl+r — перечитать содержимое каталога

Ctrl+Space — Показать размер текущего каталога

Ctrl-X+D — сравнить каталоги

ESC+C — быстро сменить каталог

alt-c -окно «Быстрая смена каталога»

## **Редактор**

F4 (в редакторе) — поиск с заменой

F6 (в редакторе) — поиск с помощью регулярного выражения

Shift-Del (в редакторе) — удалить блок (и положить его в clipboard)

Shift-Ins (в редакторе) — вставить блок из буфера (работает даже в другой консоли!!!) Можно редактировать два и более файлов на разных консолях и гонять блоки между ними.


Shift+F3 — Начать выделение блока текста. Повторное нажатие F3 закончит выделение

Shift+F5 — Вставка текста из внутреннего буфера обмена mc (прочитать внешний файл)

Meta+i — Переключение режима «Автовыравнивание возвратом каретки», удобно при вставке отформатированного текста из буфера обмена

Meta+l — Переход к строке по её номеру

Meta+q — Вставка литерала (непечатного символа).См. таблицу ниже

Meta+t — Сортировка строк выделенного текста

Meta+u — Выполнить внешнюю команду и вставить в позицию под курсором её вывод

Ctrl+f — Занести выделенный фрагмент во внутренний буфер обмена mc (записать во внешний файл)

Ctrl+k — Удалить часть строки до конца строки

Ctrl+n — Создать новый файл

Ctrl+s — Включить или выключить подсветку синтаксиса

Ctrl+t — Выбрать кодировку текста

Ctrl+u — Отменить действия

Ctrl+x — Перейти в конец следующего

Ctrl+y — Удалить строку

Ctrl+z — Перейти на начало предыдущего слова

Meta+Enter — Диалог перехода к определению функции

Meta+- — Возврат после перехода к определению функции

Meta++ — Переход вперед к определению функции

Meta+n — Включение/отключение отображения номеров строк

tab Отодвигает вправо выделенный текст, если выключена опция «Постоянные блоки»

Meta-tab Отодвигает влево выделенный текст, если выключена опция «Постоянные блоки»

Shift+Стрелки Выделение текста

Meta+Стрелки Выделение вертикального блока

Meta+Shift+- Переключение режима отображения табуляций и пробелов

Meta+Shift++ Переключение режима «Автовыравнивание возвратом каретки»

Подробнее в [1] и [3].


# Выполнение лабораторной работы

1. Изучим информацию командой man

    (рис. -@fig:001,   -@fig:002 ,   -@fig:003).
   
   ![Вызов справки](screens\1.jpg){ #fig:001 width=50% }

   

   ![Справка о mc1](screens\2.jpg){ #fig:002 width=70% }

   

   ![Справка о mc2](screens\3.jpg){ #fig:003 width=70% } 

2. Запустим из командной строки mc (+Enter), его структура на  рис. -@fig:004

   ![Интерфейс](screens\4.jpg){ #fig:004 width=70% }

3. Выполним несколько операций: просмотр файла (рис. -@fig:006), копирование (рис. -@fig:007), изменение прав доступа (рис. -@fig:008), создание каталога  (рис. -@fig:009). 

   ![Просмотр содержимого](screens\6.jpg){ #fig:006 width=70% }

   ![Копирование](screens\7.jpg){ #fig:007 width=70% }

   ![Изменение прав доступа](screens\8.jpg){ #fig:008 width=70% }

   ![Создание каталога](screens\9.jpg){ #fig:009 width=70% }

4. Выполним основные команды меню левой панели: быстрый просмотр  (рис. -@fig:010), дерево (рис. -@fig:011), информация (рис. -@fig:012).

   

   ![быстрый просмотр](screens\10.jpg){ #fig:010 width=70% }

   ![дерево](screens\11.jpg){ #fig:011 width=70% }

   ![информация](screens\12.jpg){ #fig:012 width=70% }

5. С помощью меню файл выполним:

   1. просмотр и редактирование содержимого текстового файла  (рис. -@fig:013),

      ![редактирование файла](screens\13.jpg){ #fig:013 width=70% }

   2. создание каталога и копирование в него файлов (рис. -@fig:007, рис. -@fig:009);

6. Из меню команда выполним следующие действия:

   1. поиск в файловой системе файла с заданными условиями (например, файла с расширением .c или .cpp, содержащего строку main) (рис. -@fig:014);

      ![поиск .cpp файлов](screens\14.jpg){ #fig:014 width=70% }

   2. вызов истории команд;

   3. переход в домашний каталог (рис. -@fig:015);

      ![переход в домашний каталог](screens\15.jpg){ #fig:015 width=70% }

   4. анализ файла меню и файла расширений (рис. -@fig:016, рис. -@fig:017).

      ![файл расширений](screens\16.jpg){ #fig:016 width=70% }

      

      ![файл меню](screens\17.jpg){ #fig:017 width=70% }

7. Из меню настройки изучим команды настройки интерфейса  (рис. -@fig:018, рис. -@fig:019, -@fig:020, -@fig:021).

   ![параметры конфигурации](screens\18.jpg){ #fig:018 width=70% }

   ![внешний вид](screens\19.jpg){ #fig:019 width=70% }

   ![горизонтальное разделение панелей](screens\20.jpg){ #fig:020 width=70% }

   ![настройки панелей](screens\21.jpg){ #fig:021 width=70% }

8. **Задание по встроенному редактору mc**

   Создадим файл text.txt: *touch text.txt* (рис. -@fig:022).

   ![создание text.txt](screens\22.jpg){ #fig:022 width=70% }

9. Откроем файл встроенным редактором и вставим кусок текста (рис. -@fig:023).

   ![текст файла](screens\23.jpg){ #fig:023 width=70% }

10. С помощью горячих клавиш сделаем следующие операции:

    1. удалим последнюю строку Ctrl-y (рис. -@fig:024,  -@fig:025).

    ![исходный файл](screens\24.jpg){ #fig:024 width=70% }

    ![после удаления строки](screens\25.jpg){ #fig:025 width=70% }

    2. Выделим фрагмент текста и скопируем его на новую строку. F5 (рис. -@fig:026).

       ![после копирования](screens\26.jpg){ #fig:026 width=70% }

    3.  Выделите фрагмент текста и перенесите его на новую строку. F6  (рис. -@fig:027).

       ![после переноса на новую строку](screens\27.jpg){ #fig:027 width=70% }

    4. Отменим последнее действие. Ctrl-u  (рис. -@fig:028).

       ![после отмены действия](screens\28.jpg){ #fig:028 width=70% }

    5. Перейдите в конец файла (нажав комбинацию клавиш) и напишите некоторый текст. Перейдите в начало файла (нажав комбинацию клавиш) и напишите некоторый текст. C-Home, C-End.  (рис. -@fig:028,  рис. -@fig:029).

       ![переход в начало](screens\29.jpg){ #fig:029 width=70% }

    6. Сохраним и закроем файл F2, F10.

11. Откроем файл на языке С. С помощью меню КОМАНДА можно настроить подсветку синтаксиса.  (рис. -@fig:030).

    ![переход в начало](screens\30.jpg){ #fig:030 width=70% }

12. После отключения подсветки  (рис. -@fig:031):

    ![переход в начало](screens\31.jpg){ #fig:031 width=70% }


# Выводы

В процессе работы над лабораторной работы были изучены основные возможности командной оболочки Midnight Commander. Приобретены навыки практической работы по просмотру каталогов и файлов, манипуляций с ними.

# Библиография

1. https://prosto-tak.ru/shpargalka-po-mc-midnight-commander/
2. https://redos.red-soft.ru/base/manual/redos-manual/utilites/mc-filemanager/
3. Д.С. Кулябов, А.В. Королькова / Администрирование локальных систем. Лабораторные работы. — М.: Российский университет дружбы народов, 2017. — 119 с.